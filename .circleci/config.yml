version: 2.1

workflows:
  my-workflow:
    jobs:
      - test-circle-ci-add-branch:
          name: this job run after circle-ci-add-branch branch has changes
          filters:
            branches:
              only:
                - circle-ci-add
      - test_release-next:
          name: this job run after release-next branch has changes
          filters:
            branches:
              only:
                - release-next
          requires:
            - test-circle-ci-add-branch

jobs:
  test-circle-ci-add-branch:
    docker:
      - image: cimg/aws:2023.07
    steps:
      - checkout
      - run:
          name: check version
          command: aws --version
      - run:
          name: echo etwas
          command: echo "hello from circle-ci-add-branch"

  test_release-next:
    docker:
      - image: cimg/aws:2023.07
    steps:
      - checkout
      - run:
          name: trn
          command: echo "hello from release-next"